var cwp_namespace={php_settings_var:"categoryPosts",widget_class:".category-widget-cont",template_panel_prefix:".categoryposts-data-panel-",open_panels:{},template_change_timer:null,clickHandler:function(e){jQuery(e).toggleClass("open").next().stop().slideToggle();var t=jQuery(e).data("panel"),n=jQuery(e).parent().parent().parent().parent().parent().attr("id"),a={};this.open_panels.hasOwnProperty(n)&&(a=this.open_panels[n]),a.hasOwnProperty(t)?delete a[t]:a[t]=!0,this.open_panels[n]=a},toggleCatSelection:function(e){var t=jQuery(e).find("option:selected").attr("value"),n=e.parentElement.parentElement.parentElement.parentElement;"0"==t?(jQuery(n).find(".categoryPosts-title_link").hide(),jQuery(n).find(".categoryPosts-title_link_url").show(),jQuery(n).find(".categoryPosts-no_cat_childs").hide()):(jQuery(n).find(".categoryPosts-title_link").show(),jQuery(n).find(".categoryPosts-title_link_url").hide(),jQuery(n).find(".categoryPosts-no_cat_childs").show())},toggleDisableFontStyles:function(e){var t=jQuery(e).find("input").attr("checked"),n=e.parentElement.parentElement;"checked"==t?jQuery(n).find(".categoryposts-data-panel-general-disable-font-styles").hide():jQuery(n).find(".categoryposts-data-panel-general-disable-font-styles").show()},toggleDateFormat:function(e){var t=jQuery(e).val(),n=e.parentElement.parentElement;"other"!=t?jQuery(n).find(".categoryPosts-date_format").hide():jQuery(n).find(".categoryPosts-date_format").show()},toggleTemplateHelp:function(e,t){t.preventDefault();var n=e.parentElement.parentElement.parentElement.parentElement;jQuery(n).find(".cat-post-template-help").toggle("slow")},toggleAssignedCategoriesTop:function(e){var t=jQuery(e).find("input").attr("checked"),n=e.parentElement.parentElement;"checked"==t?jQuery(n).find(".categoryposts-details-panel-assigned-cat-top").show():jQuery(n).find(".categoryposts-details-panel-assigned-cat-top").hide()},toggleHideTitle:function(e){var t=jQuery(e).attr("checked"),n=e.parentElement.parentElement.parentElement;"checked"!=t?jQuery(n).find(".categoryposts-data-panel-title-settings").show():jQuery(n).find(".categoryposts-data-panel-title-settings").hide()},selectPremadeTemplate:function(e){var t=e.parentElement.parentElement.parentElement,n=e.parentElement.parentElement,a=jQuery(n).find("select"),i="%title%";switch(value=a.val(),value){case"title":i="%title%";break;case"title_excerpt":i="%title%\n\n%excerpt%";break;case"title_thumb":i="%title%\n\n%thumb%";break;case"title_thum_excerpt":i="%title%\n\n%thumb%\n%excerpt%";break;case"everything":i="%title%\n\n",i+="%date%\n\n",i+="%thumb%\n",i+='<span class="dashicons dashicons-admin-comments"></span> %commentnum% ',i+='<span class="dashicons dashicons-admin-users"></span> %author%\n',i+="%excerpt%\n",i+="Categories: %category% ",i+='<span class="dashicons dashicons-tag"></span> %post_tag%'}var l=jQuery(t).find("textarea");l.val(i),l.trigger("input"),l.trigger("change")},autoCloseOpenPanels:function(e){if(tiptoppress[this.php_settings_var].accordion&&!jQuery(e).hasClass("open")){var t=jQuery(e).parent().find(".open");this.clickHandler(t)}},defaultThumbnailSelection:function(a,e,t){var i=wp.media({title:e,multiple:!1,library:{type:"image"},button:{text:t}});return i.on("close",function(){var e=i.state().get("selection").toJSON();if(1==e.length){var t=e[0],n='<img src="'+t.url+'" ';n+='width="60" ',n+='height="60" ',n+="/>",jQuery(a).parent().prev().find(".default_thumb_img").html(n),jQuery(a).parent().find(".cwp_default_thumb_remove").show(),jQuery(a).parent().prev().find(".default_thumb_id").val(t.id).change()}}),i.open(),!1},removeDefaultThumbnailSelection:function(e){return jQuery(e).parent().prev().find(".default_thumb_img").html(cwp_default_thumb_selection.none),jQuery(e).hide(),jQuery(e).parent().prev().find(".default_thumb_id").val(0).change(),!1},templateChange:function(i){null!=this.template_change_timer&&clearTimeout(this.template_change_timer),this.template_change_timer=setTimeout(function(){for(var e=jQuery(i).val(),t=tiptoppress[this.php_settings_var].template_tags,n=jQuery(i.parentElement.parentElement.parentElement.parentElement),a=0;a<t.length;a++)-1!==e.indexOf(t[a])?n.find(this.template_panel_prefix+t[a]).show():n.find(this.template_panel_prefix+t[a]).hide()}.bind(this),250)}};jQuery(document).ready(function(){var e=".category-widget-cont";function l(){jQuery(".cwp_default_thumb_select").off("click").on("click",function(){cwp_namespace.defaultThumbnailSelection(this,cwp_default_thumb_selection.frame_title,cwp_default_thumb_selection.button_title)}),jQuery(document).on("change",e+" .categoryposts-data-panel-filter-cat",function(){cwp_namespace.toggleCatSelection(this)}),jQuery(".cwp_default_thumb_remove").off("click").on("click",function(){cwp_namespace.removeDefaultThumbnailSelection(this)}),jQuery(e+"-assigned_categories").off("click").on("click",function(){cwp_namespace.toggleAssignedCategoriesTop(this)}),jQuery(document).on("click",e+" .hide_title",function(){cwp_namespace.toggleHideTitle(this)}),jQuery(document).on("change",e+" .categoryPosts-preset_date_format select",function(){cwp_namespace.toggleDateFormat(this)}),jQuery(document).off("click",e+" a.toggle-template-help").on("click",e+" a.toggle-template-help",function(e){cwp_namespace.toggleTemplateHelp(this,e)}),jQuery(document).on("click",e+" .cat-post-premade_templates button",function(){cwp_namespace.selectPremadeTemplate(this)}),jQuery(document).on("change",e+" .cat-post-premade_templates select",function(e){e.preventDefault(),e.stopPropagation()}),jQuery(document).on("input",e+" .categoryPosts-template textarea",function(){cwp_namespace.templateChange(this)})}jQuery(".category-widget-cont h4").click(function(){cwp_namespace.autoCloseOpenPanels(this),cwp_namespace.clickHandler(this)}),jQuery(document).on("widget-added widget-updated panelsopen",function(e,t){jQuery(".category-widget-cont h4").off("click").on("click",function(){cwp_namespace.autoCloseOpenPanels(this),cwp_namespace.clickHandler(this)}),jQuery(".cwp_default_thumb_select").off("click").on("click",function(){cwp_namespace.defaultThumbnailSelection(this,cwp_default_thumb_selection.frame_title,cwp_default_thumb_selection.button_title)}),jQuery(".cwp_default_thumb_remove").off("click").on("click",function(){cwp_namespace.removeDefaultThumbnailSelection(this)});var n=jQuery(t).attr("id");if(cwp_namespace.open_panels.hasOwnProperty(n)){var a=cwp_namespace.open_panels[n];for(var i in a)jQuery(t).find("[data-panel="+i+"]").toggleClass("open").next().stop().show()}l()}),l()});